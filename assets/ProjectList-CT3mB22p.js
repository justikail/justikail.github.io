import{j as e,M as f,r as m,S as P,s as j,B as h}from"./index-Dg-wDLzq.js";import{T as F}from"./Api-DeJDd3MZ.js";f.setAppElement("#root");function k({isOpen:o,closeModal:l,project:t,onChange:i,handleSubmit:n}){return e.jsx(f,{isOpen:o,closeModal:l,contentLabel:"Edit Project",className:"modal",overlayClassName:"overlay",children:t&&e.jsxs("form",{onSubmit:n,children:[e.jsx("h2",{children:"Edit Project"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("div",{className:"modal-wrapper",children:[e.jsx("label",{htmlFor:"title",children:"Project Name:"}),e.jsx("input",{type:"text",id:"title",name:"title",value:t.title,onChange:s=>i({...t,title:s.target.value})}),e.jsx("label",{htmlFor:"repo",children:"Project Repo:"}),e.jsx("input",{type:"text",id:"repo",name:"repo",value:t.repo,onChange:s=>i({...t,repo:s.target.value})}),e.jsx("label",{htmlFor:"description",children:"Description:"}),e.jsx("textarea",{name:"description",id:"description",value:t.description,onChange:s=>i({...t,description:s.target.value}),children:t.description})]}),e.jsxs("div",{className:"modal-wrapper",children:[e.jsx("label",{htmlFor:"image",children:"Image:"}),e.jsx("input",{type:"text",name:"image",id:"image",value:t.image,onChange:s=>i({...t,image:s.target.value})}),e.jsx("label",{htmlFor:"tech",children:"Tech:"}),e.jsx("textarea",{name:"tech",id:"tech",value:t.tech,onChange:s=>i({...t,tech:s.target.value}),children:t.tech})]}),e.jsxs("div",{className:"modal-wrapper-radio",children:[e.jsx("input",{type:"radio",name:"status",id:"active",value:"true",checked:t.status===!0,onChange:()=>i({...t,status:!0})}),e.jsx("label",{htmlFor:"active",children:"Active"}),e.jsx("input",{type:"radio",name:"status",id:"nonactive",value:"false",checked:t.status===!1,onChange:()=>i({...t,status:!1})}),e.jsx("label",{htmlFor:"nonactive",children:"Non-Active"})]})]}),e.jsx("button",{className:"btn-submit",type:"submit",children:"Save"}),e.jsx("button",{className:"btn-submit",type:"button",onClick:l,children:"Cancel"})]})})}function T(o){const[l,t]=m.useState([]),[i,n]=m.useState(!1),[s,c]=m.useState(null),v=async a=>{if((await P.fire({title:"Are you sure?",text:"You can't revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed){const{error:d}=await j.from("portfolio").delete().eq("id",a);d?h.error("Something wrong!"):(h.success("Success delete project!"),t(l.filter(u=>u.id!==a)))}},b=a=>{c(a),n(!0)},x=()=>{n(!1),c(null)},g=async a=>{a.preventDefault();const{id:r,title:d,repo:u,description:y,tech:w,image:C,status:N}=s,{error:S}=await j.from("portfolio").update({title:d,repo:u,description:y,tech:w,image:C,status:N}).eq("id",r);S||(h.success("Success edit project!"),t(l.map(p=>p.id===r?s:p)),x(),setTimeout(()=>{window.location.reload()},3e3))};return e.jsxs(e.Fragment,{children:[e.jsx(F,{dataProjects:t}),l&&l.filter(a=>a.status===o.status).map((a,r)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[r+1,"."]}),e.jsx("td",{children:a.title}),e.jsxs("td",{style:{display:"flex",alignItems:"center",gap:5},children:[e.jsx("button",{style:{color:"white",cursor:"pointer",backgroundColor:"transparent",outline:"none",border:"none"},title:"edit",onClick:()=>b(a),children:e.jsx("i",{className:"uil uil-edit"})}),e.jsx("button",{style:{color:"white",cursor:"pointer",backgroundColor:"transparent",outline:"none",border:"none"},title:"delete",onClick:()=>v(a.id),children:e.jsx("i",{className:"uil uil-trash-alt"})})]})]},a.id)),i?e.jsx(k,{isOpen:i,closeModal:x,project:s,onChange:c,handleSubmit:g}):""]})}export{T as default};
